<html>
  <head>
    <title>Channelのテスト</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>
    <script type="text/javascript" src="../closure-library/closure/goog/base.js" ></script>
    <script type="text/javascript" src="../deps.js" ></script>
    <script type="text/javascript">
      goog.require("goog.testing.jsunit");
      goog.require("com.ttProject.channel.Uint8ReadChannel");
      goog.require("com.ttProject.channel.XhrIoReadChannel");
      goog.require("com.ttProject.util.HexUtil");
    </script>
    <script type="text/javascript">
    function setUp() {
    }
    function tearDown() {
    }
    function test() {
      var data = new Uint8Array([1,2,3,4,5]);
      var channel = new com.ttProject.channel.Uint8ReadChannel(data);
      var dat = new Uint8Array(3);
      channel.read(dat, function(data) {
        console.log(com.ttProject.util.HexUtil.toHex(data));
      });
      var dat2 = new Uint8Array(2);
      channel.read(dat2, function(data) {
        console.log(com.ttProject.util.HexUtil.toHex(data));
      });
      
      var xhrIoChannel = new com.ttProject.channel.XhrIoReadChannel("../ahiru.flv");
      var dat = new Uint8Array(10);
      xhrIoChannel.read(dat, function(data) {
        console.log(com.ttProject.util.HexUtil.toHex(data));
      });
      var dat = new Uint8Array(11);
      xhrIoChannel.read(dat, function(data) {
        console.log(com.ttProject.util.HexUtil.toHex(data));
      });
      
      // データが足りなくなったらどうなるかしっておきたい。
      var xhrIoChannel2 = new com.ttProject.channel.XhrIoReadChannel("../readme.txt");
      var dat = new Uint8Array(10);
      xhrIoChannel2.position(390);
      xhrIoChannel2.read(dat, function(data) {
        console.log(com.ttProject.util.HexUtil.toHex(data));
        console.log(xhrIoChannel2.size());
      });
    }
    </script>
  </body>
</html>
