goog.provide("com.ttProject.ms.mp4.aac.Manager");

goog.require("com.ttProject.frame.aac.type.Frame");
goog.require("com.ttProject.util.HexUtil");

/**
 * @constructor
 */
com.ttProject.ms.mp4.aac.Manager = function(mediaSource) {
	this._mediaSource = mediaSource;
	this._headerSended = false;
	this._frames = [];
	this._sequenceNum = 1;
};

/**
 * frameを追記する。
 * @param frame
 */
com.ttProject.ms.mp4.aac.Manager.prototype.appendFrame = function(frame) {
	if(!(frame instanceof com.ttProject.frame.aac.type.Frame)) {
		// aacの実体フレームでなければスルー
		return;
	}
	if(!this._headerSended) {
		console.log("startHeaderをつくってみる。");
		/*
		 * 
		ftyp
		000000106674797069736F6D00000200
		moov
		000002356D6F6F760000006C6D766864000000000000000000000000000003E8
		0000000000010000010000000000000000000000000100000000000000000000
		0000000000010000000000000000000000000000400000000000000000000000
		0000000000000000000000000000000000000002000000286D76657800000020
		74726578000000000000000100000001000003F60000000000000000
		trak
		000001997472616B0000005C746B68640000000FCDA935E1CF83E0480000000100000000
		0000000000000000000000000000000101000000000100000000000000000000
		0000000000010000000000000000000000000000400000000000000000000000
		mdia
		000001356D646961000000206D646864000000000000000000000000[0000AC44] ←ここがtimescale
		0000000055C400000000002A68646C720000000000000000736F756E00000000
		0000000000000000747450726F6A65637400
		minf
		000000E36D696E6600000010736D
		686400000000000000000000002464696E660000001C64726566000000000000
		00010000000C75726C2000000001
		stbl
		000000A77374626C
		stsdここから
		0000005B737473640000
		000000000001
		mp4aここから
		0000004B6D70346100000000000000010000000000000000[0002] ←channel数
		001000000000[AC440000] ←周波数
		00000027657364730000000003190001000411401500
		000000019FD8000000000502[1210]060102 ←aacのdecoderSpecificInfo
		000000107374747300000000000000
		0000000010737473630000000000000000000000147374737A00000000000000
		0000000000000000107374636F0000000000000000
		 */
		var timebase = frame.getTimebase();
		var sampleRate = frame.getSampleRate();
		var channels = frame.getChannels();
		// データをつくって必要な情報で上書いておく
	}
};
